---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"You are a medical triage assistant helping patients find the right type of healthcare provider.\n\nYour job is to:\n1. Analyze patient symptoms and determine the most appropriate specialty\n2. Recommend the appropriate medical specialist based on the symptoms\n3. Assess urgency level of the symptoms\n4. Extract key symptoms\n\nIMPORTANT SAFETY RULES:\n- Always err on the side of caution \n- Route chest pain, severe bleeding, difficult breathing to EMERGENCY \n- You are NOT diagnosing - only helping with provider matching\n- Be clear about urgency without causing panic \n\nRespond ONLY with valid JSON. No markdown, no explanations outside the JSON.\n"},{"role":"user","content":"Patient describes their symptoms:\n\"I have chest pain and shortness of breath\"\n\nAnalyze and return ONLY this JSON structure:\n{\n\"specialty\": \"primary_care|cardiology|dermatology|urgent_care|emergency|mental_health|pediatrics|gynecology|oncology|orthopedics|physical_therapy|nutrition\",\n\"urgency\": \"routine|urgent|emergency\",\n\"reasoning\": \"brief explanation of your recommendation\",\n\"keywords\": [\"symptom1\", \"symptom2\", \"symptom3\"],\n\"red_flags\": [\"red_flag1\", \"red_flag2\"] (if any emergency signs present)\n}\n\nSpecialty Guidelines:\n- primary_care: general checkups, common illnesses, chronic condition management\n- cardiology: heart-related symptoms (non-emergency)\n- dermatology: skin conditions, rashes, acne, etc.\n- urgent_care: needs attention within 24-48 hours but not life-threatening or if primary care is not available\n- emergency: chest pain, severe bleeding, difficulty breathing, stroke symptoms, severe allergic reaction, etc.\n- mental_health: anxiety, depression, stress, mood disorders\n- physical_therapy: musculoskeletal pain, joint pain, limited mobility, mobility issues, injury recovery\n- nutrition: diet concerns, weight management, digestive issues\n\n\nUrgency Guidelines:\n- routine: can wait 1-2 weeks, preventive care, mild symptoms\n- urgent: needs attention within 24-48 hours, moderate symptoms\n- emergency: life-threatening, severe pain, acute symptoms\n"}],"temperature":0.3,"max_tokens":500}'
    headers:
      Authorization:
      - Bearer <OPENAI_API_KEY>
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
    body:
      encoding: UTF-8
      string: '{"id":"chatcmpl-test","object":"chat.completion","created":1234567890,"model":"gpt-4o-mini","choices":[{"index":0,"message":{"role":"assistant","content":"{\"specialty\":\"emergency\",\"urgency\":\"emergency\",\"reasoning\":\"Chest pain and shortness of breath are serious symptoms that could indicate a heart attack or other life-threatening condition. Immediate medical attention is required.\",\"keywords\":[\"chest pain\",\"shortness of breath\",\"cardiac symptoms\"],\"red_flags\":[\"chest pain\",\"difficulty breathing\"]}"},"finish_reason":"stop"}],"usage":{"prompt_tokens":100,"completion_tokens":50,"total_tokens":150}}'
    http_version: 
  recorded_at: Sat, 25 Oct 2025 00:00:00 GMT
recorded_with: VCR 6.1.0

