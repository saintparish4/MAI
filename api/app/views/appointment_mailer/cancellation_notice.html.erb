<div class="header">
  <h1 style="margin: 0; font-size: 28px;">⚠️ Appointment Cancelled</h1>
</div>

<div class="content">
  <p style="font-size: 16px; margin-bottom: 10px;">
    Hi <%= @patient.email.split('@').first.capitalize %>,
  </p>
  
  <p style="font-size: 16px; margin-bottom: 20px;">
    Your appointment has been cancelled.
  </p>
  
  <div class="appointment-details">
    <h2 style="margin-top: 0; font-size: 20px; color: #CC342D;">Cancelled Appointment</h2>
    <table style="width: 100%; border-collapse: collapse;">
      <tr>
        <td style="padding: 8px 0; font-weight: 600; width: 40%;">Provider:</td>
        <td style="padding: 8px 0;"><%= @provider.name %></td>
      </tr>
      <tr>
        <td style="padding: 8px 0; font-weight: 600;">Date & Time:</td>
        <td style="padding: 8px 0;"><%= @appointment.start_time.strftime('%B %d, %Y at %I:%M %p') %></td>
      </tr>
      <tr>
        <td style="padding: 8px 0; font-weight: 600;">Cancelled by:</td>
        <td style="padding: 8px 0;"><%= @cancelled_by == 'patient' ? 'You' : 'Provider' %></td>
      </tr>
    </table>
  </div>
  
  <p style="margin-top: 20px;">
    You can book a new appointment anytime.
  </p>
  
  <div style="text-align: center; margin: 30px 0;">
    <a href="<%= ENV['FRONTEND_URL'] || 'http://localhost:3001' %>/providers" class="button">
      Browse Providers
    </a>
  </div>
  
  <div class="footer">
    <p style="margin: 0 0 10px 0; font-weight: 600; color: #CC342D;">MaiHealth - Making healthcare accessible</p>
    <p style="margin: 0; font-size: 13px;">Questions? Reply to this email</p>
  </div>
</div>

